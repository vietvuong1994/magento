<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magento.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magento.com for more information.
 *
 * @category    design
 * @package     rwd_default
 * @copyright   Copyright (c) 2006-2015 X.commerce, Inc. (http://www.magento.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
/**
 * @var Mage_Page_Block_Html_Header $this
 */
?>

<div class="header-language-background">
    <div class="header-language-container row">
        <p class="welcome-msg col-md-12 col-lg-4 push-lg-4"><?php echo $this->getChildHtml('welcome') ?> <?php echo $this->getChildHtml('accountLinks') ?></p>
        <button class="show-topmenu"><i class="fa fa-caret-down"></i></button>
        <?php echo $this->getChildHtml('leftmenu') ?>
        <?php echo $this->getChildHtml('rightmenu') ?>
		<?php echo $this->getChildHtml('store_language') ?>
        <?php echo $this->getChildHtml('currency_switcher') ?>
        
    </div>
</div>

<header id="header" class="page-header">
    <div class="page-header-container">
        <div class="header-center">
            <div class="header-content row">
                <div class="topLogo col-sm-12 col-md-4">
                    <a class="logo" href="<?php echo $this->getUrl('') ?>">
                        <img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" class="large" />
                    </a>
                </div>

                <?php // In order for the language switcher to display next to logo on smaller viewports, it will be moved here.
                      // See app.js for details ?>
                <!-- Search -->

                <div id="header-search" class="skip-content col-12 col-sm-6 col-md-4">
                    <?php echo $this->getChildHtml('topSearch') ?>
                </div>
                <!-- Skip Links -->

                <div class="skip-links col-12 col-sm-6 col-md-4">
                    <a href="#header-nav" class="skip-link skip-nav">
                        <span class="icon"></span>
                        <span class="label"><?php echo $this->__('Menu'); ?></span>
                    </a>

                    <a href="#header-search" class="skip-link skip-search">
                        <span class="icon"></span>
                        <span class="label"><?php echo $this->__('Search'); ?></span>
                    </a>

                    <div class="account-cart-wrapper">
                        <!-- Cart -->

                        <div class="header-minicart">
                            <?php echo $this->getChildHtml('minicart_head'); ?>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->

        <div id="header-nav" class="skip-content clearfix">
            <button class="show-middlemenu">CATEGORIES<i class=" fa fa-bars"></i></button>
            <?php echo $this->getChildHtml('topMenu') ?>
        </div>

        

        <!-- Account -->

        <div id="header-account" class="skip-content">
            <?php echo $this->getChildHtml('topLinks') ?>
        </div>
    </div>
    
</header>


<?php echo $this->getChildHtml('topContainer'); ?>
<script type="text/javascript">

jQuery('button.dropbtn').on('click', function() {

    var dr = jQuery(this)[0].id;
    
    if (jQuery('.' + dr).hasClass('show')) {
        jQuery('.' + dr).removeClass('show');
    } else {
        if (jQuery('.dropdown-content').hasClass('show')) {
            jQuery('.dropdown-content').removeClass('show');
        }
        jQuery('.' + dr).addClass("show");
    }
});

jQuery(document).mouseup(function(e) {
    var container = jQuery(".dropbtn");

    if (!container.is(e.target) // if the target of the click isn't the container...
        && container.has(e.target).length === 0) // ... nor a descendant of the container
    {
        jQuery('.dropdown-content').removeClass('show');
    }
});
jQuery('.show-topmenu').on('click', function() {
    if (jQuery('.list').hasClass('show')) {
        jQuery('.list').removeClass('show')
    } else {
        jQuery('.list').addClass('show')
    }
});
jQuery('.show-middlemenu').on('click', function() {
    if (jQuery('.nav-primary').hasClass('show')) {
        jQuery('.nav-primary').removeClass('show')
    } else {
        jQuery('.nav-primary').addClass('show')
    }
});


jQuery(window).scroll(function(){
  var sticky = jQuery('#header-nav'),
      scroll = jQuery(window).scrollTop();

  if (scroll >= 200) sticky.addClass('fixed');
  else sticky.removeClass('fixed');
});
</script>
